description: "Install Ruby within a build. To be used in a Linux distro with Apt available."
parameters:
  version:
    description: "Ruby version."
    type: string
steps:
  - run:
      name: "Install Ruby v<< parameters.version >> via RVM"
      command: |
        # Determine if sudo is neccessary
        SUDO=""
        if [[ $EUID -ne 0 ]]; then
          SUDO=sudo
        fi
        $SUDO curl -sSL https://get.rvm.io | $SUDO bash -s -- --ignore-dotfiles
        $SUDO adduser $(whoami) rvm
        echo "source $HOME/.rvm/scripts/rvm" >> ~/.bash_profile
        echo "source $HOME/.rvm/scripts/rvm" >> $BASH_ENV
        source ~/.rvm/scripts/rvm
        type rvm | head -n 1
